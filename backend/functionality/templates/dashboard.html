{% extends "layout.html" %}

{% block body_content %}
<div class="container" style="max-width: 900px; margin: 0 auto; padding: 1rem;">
  <h2 style="margin-bottom: .25rem;">Hi {{ first_name }} ðŸ‘‹</h2>
  <p style="margin-top:0;color:#666;">Hereâ€™s your contribution snapshot.</p>

  {% if error %}
  <div style="background:#ffeaea;color:#b30000;padding:10px 14px;border-radius:8px;margin-bottom:10px;">
    {{ error }}
  </div>
  {% endif %}

  <!-- Summary cards -->
  <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:15px;margin:16px 0 24px;">
    <div style="background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;text-align:center;">
      <h4>Total Hours</h4>
      <p style="font-size:28px;font-weight:bold;">{{ "%.2f"|format(total_hours) }}</p>
    </div>

    <div style="background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;text-align:center;">
      <h4>Upcoming Events</h4>
      <p style="font-size:28px;font-weight:bold;">{{ upcoming_events|length }}</p>
    </div>

    <div style="background:#fff;border:1px solid #eee;border-radius:12px;padding:16px;text-align:center;">
      <h4>Badges</h4>
      <p style="font-size:28px;font-weight:bold;">{{ badges|length }}</p>
    </div>
  </div>

  <!-- Upcoming events -->
  <h3>Upcoming Events</h3>
  {% if upcoming_events %}
  <ul style="list-style:none;padding:0;">
    {% for ev in upcoming_events %}
    <li style="background:#fff;border:1px solid #eee;border-radius:10px;padding:12px;margin-bottom:10px;">
      <strong>{{ ev.Title }}</strong><br>
      <small>{{ ev.StartAt }} â€” {{ ev.LocationCity }}</small>
    </li>
    {% endfor %}
  </ul>
  {% else %}
  <p>No upcoming events.</p>
  {% endif %}

  <!-- Badges -->
  <h3>Your Badges</h3>
  {% if badges %}
  <div style="display:flex;flex-wrap:wrap;gap:12px;">
    {% for b in badges %}
    <div style="background:#fff;border:1px solid #eee;border-radius:10px;padding:10px;width:180px;text-align:center;">
      {% if b.IconURL %}
        <img src="{{ b.IconURL }}" alt="{{ b.Name }}" style="width:50px;height:50px;border-radius:50%;margin-bottom:6px;">
      {% endif %}
      <div style="font-weight:bold;">{{ b.Name }}</div>
      <div style="font-size:13px;color:#666;">{{ b.Description }}</div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p>No badges yet.</p>
  {% endif %}
</div>
{% endblock %}
